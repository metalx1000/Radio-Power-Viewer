#!/bin/bash
#cat log.dat|while read line;do echo "${line}="|base64 -d 2>/dev/null|grep 99|sed 's/bear=[0-9][0-9][0-9].[0-9]//g'|sed 's/bear=[0-9][0-9].[0-9]//g'|sed 's/bear=[0-9].[0-9]//g'|sed 's/ ]/]/g'|awk '{print $4","$18","}';echo "${line}"|cut -d\| -f2;done|sed ':a;N;$!ba;s/,\n/,/g'|tr "," " "|awk '{print "{\"lat\":"$1",\"lng\":"$2",\"height\":"$4",\"db\":"$3"},"}'
cat log.dat|while read line;do echo -n "$(echo "${line}="|base64 -d 2>/dev/null|grep '99 0'|cut -d\| -f1,3|sed 's/SignalStrength:/|/g'|sed 's/acc=/|/g'|cut -d\| -f3|sed 's/| / /g'|awk '{print $9 ","}')";echo "${line}"|cut -d\| -f2,3|sed 's/|/ /g';done|grep ','|sed 's/,/ /g'|grep -v undefined|awk '{print "{\"lat\":"$3",\"lng\":"$4",\"height\":"$2",\"db\":"$1"},"}'|sed '/lng":,"/d'|sort -u
